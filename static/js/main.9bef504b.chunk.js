(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(7),o=n.n(c),i=(n(13),n(1)),s=n(2),u=n(5),l=n(4),m=n(3),p=function(){return fetch("http://localhost:4000/servers",{method:"get"}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))},d=function(){return fetch("http://localhost:4000/types",{method:"get"}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))},f=function(e){return fetch("http://localhost:4000/currency/".concat(e),{method:"get",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))},h=function(e){return fetch("http://localhost:4000/addserver",{method:"post",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({name:e.name,ip:e.ip,type:e.type,isRunning:e.isRunning,runTime:e.runTime,price:e.price})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))},v=function(e){return fetch("http://localhost:4000/deleteserver/".concat(e),{method:"delete",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))},g=function(e,t){return fetch("http://localhost:4000/switch/".concat(e),{method:"put",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({toggle:t})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))},y=function(e,t){return fetch("http://localhost:4000/runtime/".concat(e),{method:"put",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({runTime:t})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))},E=function(e,t){return fetch("http://localhost:4000/price/".concat(e),{method:"put",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({price:t})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))},S=function(e){return fetch("http://localhost:4000/types/".concat(e),{method:"get",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))},b=function(){return fetch("http://localhost:4000/isrunningoff",{method:"put",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))},T=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.setState({servers:r.props.servers},(function(){r.setState({isLoading:!1}),r.createIntervals()}))},r.classes={GREEN:"btn btn-success",DARK:"btn btn-dark"},r.createIntervals=function(){r.setState({intervals:[]},(function(){var e=[];r.state.servers.forEach((function(t){e.push(r.createObjTimer(t.id))})),r.setState({intervals:e})}))},r.createObjTimer=function(e){return{id:e,interval:null,currentTimer:0,timerString:"00:00:00"}},r.switchRunning=function(e,t,n,a,c){var o=document.getElementById(e),i=o.textContent,s=c.filter((function(t){return t.id===e}))[0];"On"===i?(t(e,0),o.setAttribute("class",r.classes.DARK),o.textContent="Off",r.stopTimer(s,n,a)):(t(e,1),o.setAttribute("class",r.classes.GREEN),o.textContent="On",r.startTimer(s,n,a))},r.startTimer=function(e,t,n){e.lastUpdateTime=(new Date).getTime(),e.interval=setInterval(r.update,1e4,e,t,n)},r.stopTimer=function(e){clearInterval(e.interval)},r.update=function(e,t,n){var a=(new Date).getTime(),c=a-e.lastUpdateTime;e.currentTimer+=c;var o=new Date(e.currentTimer),i=o.getMinutes()/60,s=o.getMinutes(),u=o.getSeconds(),l=r.pad(i)+":"+r.pad(s)+":"+r.pad(u);e.timerString=l,e.lastUpdateTime=a,t(e.id,e);var m=r.state.servers.filter((function(t){return t.id===e.id}))[0].type;n(e.id,u,m),e.lastUpdateTime=(new Date).getTime(),e.currentTimer=0},r.pad=function(e){return("00"+e).substr(-2)},r.state={isLoading:!0,servers:null,intervals:[]},r}return Object(s.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.servers.length!==this.props.servers.length){var n=e.servers;this.setState({servers:n},(function(){return t.createIntervals()}))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.servers,r=t.deleteServerFn,c=t.currencyIconClass,o=t.isRunningSwitchFn,i=t.updateRunTimeFn,s=t.updatePriceFn;return!0===this.state.isLoading?a.a.createElement("h1",null,"Loading..."):a.a.createElement("table",{className:"table table-striped",style:{width:"100%",border:"1px solid black"}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{scope:"col"},"IP"),a.a.createElement("th",{scope:"col"},"Server Name"),a.a.createElement("th",{scope:"col"},"Time Running"),a.a.createElement("th",{scope:"col"},"Toggle"),a.a.createElement("th",{scope:"col"},"Type"),a.a.createElement("th",{scope:"col"},"Price"),a.a.createElement("th",{scope:"col"},"Delete"))),a.a.createElement("tbody",null,null!=n?n.map((function(t,n){var u="runTime_"+t.id;return a.a.createElement("tr",{key:n},a.a.createElement("td",null,t.ip),a.a.createElement("td",null,t.name),a.a.createElement("td",{id:u},t.runTime),0===t.isRunning?a.a.createElement("td",null,a.a.createElement("button",{type:"button",className:"btn btn-dark",id:t.id,style:{borderRadius:"50%"},onClick:function(){return e.switchRunning(t.id,o,i,s,e.state.intervals)}},"Off")):a.a.createElement("td",null,a.a.createElement("button",{type:"button",className:"btn btn-success",id:t.id,style:{borderRadius:"50%"},onClick:function(){return e.switchRunning(t.id,o,i,s,e.state.intervals)}},"On")),a.a.createElement("td",null,t.type),a.a.createElement("td",null,t.price.toFixed(2),a.a.createElement("i",{className:c,style:{marginLeft:"5px"}})),a.a.createElement("td",null,a.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){return r(t.id,e.state.intervals)}},"Delete")))})):null))}}]),n}(r.Component),j=function(e){var t=e.changeCurrencyFn;return a.a.createElement("div",{className:"form-group",style:{position:"absolute",marginTop:"-16px",right:"0",width:"100px"}},a.a.createElement("select",{className:"form-control",id:"select",onChange:function(){return t()}},a.a.createElement("option",{value:"USD"},"USD"),a.a.createElement("option",{value:"EUR"},"EUR"),a.a.createElement("option",{value:"ILS"},"ILS")))},C=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).typing=function(e,t){var n=e.target.value;switch(t){case"name":r.setState({name:n});break;case"ip":r.setState({ip:n})}},r.submit=function(e){if(e.preventDefault(),r.checkRequired()){var t=document.getElementById("inputState"),n=t.options[t.selectedIndex].text,a={ip:r.state.ip,name:r.state.name,type:n,isRunning:0,runTime:"00:00:00",price:0};r.props.addServerFn(a),r.setState({message:{flag:1,error:!1,msg:"Added successfully"}},(function(){return r.showMessage()}))}else r.setState({message:{flag:1,error:!0,msg:"All fields are required"}},(function(){return r.showMessage()}))},r.checkRequired=function(){return""!==r.state.ip&&""!==r.state.name},r.showMessage=function(){setTimeout((function(){return r.setState({message:{flag:0}})}),3e3)},r.state={name:"",ip:"",type:"",message:{flag:0,error:null,msg:null}},r}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.props.types;return a.a.createElement("div",null,a.a.createElement("form",null,a.a.createElement("div",{className:"form-row"},a.a.createElement("div",{className:"form-group col-sm-2"},a.a.createElement("label",{htmlFor:"inputName"},"Server name"),a.a.createElement("input",{type:"text",className:"form-control",id:"inputName",onChange:function(t){return e.typing(t,"name")},required:!0})),a.a.createElement("div",{className:"form-group col-sm-2"},a.a.createElement("label",{htmlFor:"inputIp"},"Server IP"),a.a.createElement("input",{type:"text",className:"form-control",id:"inputIp",onChange:function(t){return e.typing(t,"ip")},required:!0}))),a.a.createElement("div",{className:"form-row"},a.a.createElement("div",{className:"form-group col-sm-2"},t.length>0?a.a.createElement("select",{id:"inputState",className:"form-control"},a.a.createElement("option",{defaultValue:!0},t[0].name),t.slice(1).map((function(e,t){return a.a.createElement("option",{key:t},e.name)}))):a.a.createElement("select",{id:"inputState",className:"form-control"})),a.a.createElement("div",{className:"form-group col-sm-2"},a.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(t){return e.submit(t)}},"Add Server"))),0===this.state.message.flag?null:1===this.state.message.flag&&!0===this.state.message.error?a.a.createElement("div",{className:"alert alert-danger",role:"alert"},this.state.message.msg):a.a.createElement("div",{className:"alert alert-success",role:"alert"},this.state.message.msg)))}}]),n}(r.Component),I=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).currency={USD:"fa fa-usd",EUR:"fa fa-eur",ILS:"fa fa-ils"},r.componentDidMount=function(){p().then((function(e){return r.setState({servers:e})})),d().then((function(e){return r.setState({types:e})}));var e=Object(u.a)(r);window.onbeforeunload=function(){return b().then((function(){return e.updateSevers()})),!1}},r.updateSevers=function(){p().then((function(e){return r.setState({servers:e})})),document.getElementById("select").selectedIndex=0,r.updateCurrency("USD")},r.addServer=function(e){h(e).then((function(){return r.updateSevers()})),r.clearTextBox()},r.deleteServer=function(e,t){v(e).then((function(){return r.updateSevers()}));var n=t.filter((function(t){return t.id=e})).interval;clearInterval(n)},r.changeCurrency=function(){var e=document.getElementById("select").value;r.updateCurrency(e)},r.updateCurrency=function(e){switch(e){case"EUR":f(.839).then((function(e){return r.setState({servers:e,currencyIconClass:r.currency.EUR})}));break;case"ILS":f(3.36).then((function(e){return r.setState({servers:e,currencyIconClass:r.currency.ILS})}));break;default:p().then((function(e){return r.setState({servers:e,currencyIconClass:r.currency.USD})}))}},r.isRunningSwitch=function(e,t){g(e,t?1:0)},r.updateRunTime=function(e,t){y(e,t.timerString).then((function(){return r.updateSevers()}))},r.updatePrice=function(e,t,n){S(n).then((function(n){return r.setState({price:n[0].price},(function(){E(e,r.state.price*t).then((function(){return r.updateSevers()}))}))}))},r.clearTextBox=function(){var e=document.getElementById("inputName"),t=document.getElementById("inputIp");document.getElementById("inputState").selectedIndex=0,e.value="",t.value=""},r.state={servers:[],types:[],currencyIconClass:"fa fa-usd"},r}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{style:{position:"relative",width:"800px",margin:"100px auto"}},a.a.createElement(T,{servers:this.state.servers,deleteServerFn:function(t,n){return e.deleteServer(t,n)},currencyIconClass:this.state.currencyIconClass,isRunningSwitchFn:function(t,n){return e.isRunningSwitch(t,n)},updateRunTimeFn:function(t,n){return e.updateRunTime(t,n)},updatePriceFn:function(t,n,r){return e.updatePrice(t,n,r)}}),a.a.createElement(j,{changeCurrencyFn:function(t){return e.changeCurrency(t)}}),a.a.createElement(C,{types:this.state.types,addServerFn:this.addServer}))}}]),n}(r.Component);var w=function(){return a.a.createElement("div",null,a.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,n){e.exports=n(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.9bef504b.chunk.js.map